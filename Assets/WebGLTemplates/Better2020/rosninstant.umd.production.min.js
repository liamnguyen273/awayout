!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).ROSNInstant={})}(this,(function(e){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var t=function(){function e(e){this.listeners=new Map,this.listenerManager=e}var n=e.prototype;return n.addListener=function(e,n){this.listeners.set(e,n),this.listenerManager.add(e,n)},n.removeListener=function(e){var n=this.listeners.get(e);n&&(this.listenerManager.remove(e,n),this.listeners.delete(e))},n.on=function(e,n){this.removeListener(e),this.addListener(e,n)},n.once=function(e,n){var t=this;this.addListener(e,(function(o){n(o),t.removeListener(e)}))},n.off=function(e){this.listeners.has(e)&&this.removeListener(e)},n.clear=function(){var e=this;this.listeners.forEach((function(n,t){e.listenerManager.remove(t,n)})),this.listeners.clear()},e}();function o(e,n,t){void 0===t&&(t=null);var o={type:e,source:n,data:t||{}};"undefined"!=typeof RApp?RApp.postMessage(JSON.stringify(o)):console.log("emit: "+JSON.stringify(o))}var i=function(){function e(e){this.eventWrapper=new t({add:function(e,n){window.document.addEventListener(e,n)},remove:function(e,n){window.document.removeEventListener(e,n)}}),this.source=e}var i=e.prototype;return i.showAds=function(e){o("show_"+e.adsType+"_ads",this.source,n({},e))},i.startGame=function(){o("request_game_data",this.source)},i.emitCustomEvent=function(e,n){o(e,this.source,n)},i.on=function(e,n){this.eventWrapper.on(e,this.transform(n))},i.off=function(e){this.eventWrapper.off(e)},i.once=function(e,n){this.eventWrapper.once(e,this.transform(n))},i.clear=function(){this.eventWrapper.clear()},i.transform=function(e){return function(n){e(n.detail?"string"==typeof n.detail?JSON.parse(n.detail):n.detail:{detail:{},message:"Detail NULL"})}},e}(),r=function(){function e(){}return e.parseParameters=function(e,n,t){if(void 0===t){var o="function"==typeof e;n?(t=n,o||(n=null)):null===n&&o&&(t=e,e=null,n=null),null!==n&&o&&(n=e,e=null)}return{options:e=e||Object.create(null),onProgress:n,onComplete:t}},e.downloadScript=function(n){return e.downloadScriptWeb(n)},e.downloadScriptWeb=function(n){return new Promise((function(t,o){var i=e.parseParameters(r,null,s),r=i.options,s=i.onComplete;if(e.downloaded[n])t();else{var a=document,u=document.createElement("script");u.async=r.async,u.src=n;var c=function o(){var i;null==(i=u.parentNode)||i.removeChild(u),u.removeEventListener("load",o,!1),u.removeEventListener("error",d,!1),e.downloaded[n]=!0,t()},d=function e(){var t;null==(t=u.parentNode)||t.removeChild(u),u.removeEventListener("load",c,!1),u.removeEventListener("error",e,!1),console.log("ScriptDownloader:downloadScriptWeb - Cannot load "+n),o()};u.addEventListener("load",c,!1),u.addEventListener("error",d,!1),a.body.appendChild(u)}}))},e}();r.downloaded={};var s=function(){function e(){}return e.makeRequestUrl=function(e,n,t,o){return void 0===t&&(t={}),void 0===o&&(o=""),new Promise((function(i,r){var s=new XMLHttpRequest;s.open(n,e,!0),s.setRequestHeader("Content-type","application/json"),o&&s.setRequestHeader("x-access-token",o),s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<300?i(s.response):r({status:this.status,statusText:s.statusText}))},s.onerror=function(){r({status:this.status,statusText:s.statusText})},0==Object.keys(t).length?s.send():s.send(JSON.stringify(t))}))},e}(),a=new i("ROSNInstant-1.0.1-alpha");e.downloadScript=function(e){return r.downloadScript(e)},e.getSDKVersion=function(){return"1.0.1-alpha"},e.initializeAsync=function(){return new Promise((function(e){console.log("ROSNInstant version 1.0.1-alpha initialize success"),e({})}))},e.injectDebug=function(){r.downloadScript("https://unpkg.com/vconsole@3.14.6/dist/vconsole.min.js").then((function(){new window.vConsole}))},e.makeRequest=function(e,n,t,o){return s.makeRequestUrl(e,n,t,o)},e.showAds=function(e,n,t){void 0===e&&(e={adsType:"interstitial",num:0,rewardType:"SCORE"}),void 0===n&&(n=function(){}),void 0===t&&(t=function(){});var o=["reward","interstitial"].find((function(n){return n===e.adsType}))||"interstitial";e.num=e.num||null;var i=function(){a.off("show_"+o+"_ad_success"),a.off("show_"+o+"_ad_fail")};a.on("show_"+o+"_ad_success",(function(e){i(),n(e)})),a.on("show_"+o+"_ad_fail",(function(){i(),t()})),a.showAds(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=rosninstant.umd.production.min.js.map
